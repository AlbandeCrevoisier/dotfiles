pkgname=slock
pkgver=1.4
pkgrel=1
pkgdesc="Simple screen locker"
url="https://tools.suckless.org/slock/"
arch=('i686' 'x86_64')
license=('MIT')
depends=('libx11')
source=('git+https://git.suckless.org/slock'
	'config.h')
sha256sums=('SKIP'
	'SKIP')
groups=('modified')

pkgver() {
	cd $srcdir/$pkgname
	printf "%s" "$(grep ^VERSION config.mk | sed 's/VERSION = //')" 
}

prepare() {
	cd $srcdir/$pkgname
	cp $srcdir/../config.h config.h
}

build() {
	cd $srcdir/$pkgname
	make -j 5
}

package() {
	cd $srcdir/$pkgname
	make PREFIX=/usr DESTDIR="$pkgdir" install
	install -Dm644 LICENSE "$pkgdir"/usr/share/licenses/$pkgname/LICENSE
}
